# 举例的数字都是随便说的

# 基础知识

## 转换流程

![[Pasted image 20240220114949.png]]
抖音没有曝光和点击,因为只能下滑看到一条视频

## 消费指标

![[Pasted image 20240220115204.png]]
不能把点击率作为唯一的优化指标,不然骗点击的标题会泛滥
追求短期消费指标是有意义的,但并不是衡量推荐系统好坏的根本指标(竭泽而渔,用户可能很快失去兴趣,而提高多样性虽然不会提升点击率,但可以提升用户粘性)

## 北极星指标

![[Pasted image 20240220115858.png]]
最关键的指标
用户规模(简单易懂,强相关)
消费与点击率冲突时,例如把多样性做好,用户点击率下降了但是使用了更长的时间,完全ok
发布(冷启动)

## 实验流程

![[Pasted image 20240220120802.png]]
小流量AB测试:对照组和实验组,判断新策略是否显著优于旧策略,如果是则加大流量,最终推全

# 推荐系统的链路

![[Pasted image 20240220121658.png]]
- 召回:用户刷新小红书时,系统调用几十条召回通道,每条通道召回几十到几百篇笔记,一共取回几千篇笔记
- 粗排:用规模小的机器学习模型排序和截断
- 精排:大规模神经网络模型打分,排序截断(小红书不截断)
- 重排:根据精排分数和多样性分数随机抽样得到几十篇笔记,然后把相似内容打散,并且插入广告和运营内容

## 召回通道

![[Pasted image 20240220122347.png]]
召回后还要过滤(例如不喜欢的笔记不喜欢的作者等)

## 重排

![[Pasted image 20240220122651.png]]
主要是考虑多样性,还要把相似的内容打散
![[Pasted image 20240220123018.png]]
抽样的依据:精排分数,多样性

## 粗排 精排

![[Pasted image 20240220122938.png]]

## 总结

![[Pasted image 20240220123114.png]]粗排时也会有一些规则,保证进入精排的笔记具有多样性
重排的规则非常复杂

# A/B测试

离线实验结果有收益,线上未必
![[Pasted image 20240220123422.png]]

## 随机分桶

![[Pasted image 20240220123609.png]]![[Pasted image 20240220123618.png]]每个桶不同的策略/参数

## 分层实验

目标:解决流量不够用的问题
![[Pasted image 20240220123844.png]]
![[Pasted image 20240220123905.png]]
一般来说不同层的实验不会对另一层造成影响,所以是正交
举例
![[Pasted image 20240220124024.png]]![[Pasted image 20240220124216.png]]不同的召回实验不能同时作用于一个用户身上
![[Pasted image 20240220124255.png]]![[Pasted image 20240220142607.png]]
## Holdout机制
![[Pasted image 20240220142950.png]]
## 实验推全 & 反转实验
![[Pasted image 20240220151612.png]]![[Pasted image 20240220151634.png]]
![[Pasted image 20240220151622.png]]![[Pasted image 20240220151710.png]]
## 总结
![[Pasted image 20240220151753.png]]
# 召回
## ItemCF
![[Pasted image 20240220152047.png]]从用户的行为中挖掘物品的相似性
![[Pasted image 20240220152158.png]]![[Pasted image 20240220152204.png]]![[Pasted image 20240220152256.png]]
### 完整流程
![[Pasted image 20240220160903.png]]![[Pasted image 20240220161040.png]]
⽤索引，离线计算量⼤，线上计算量⼩
## Swing召回通道(ItemCF变体)
